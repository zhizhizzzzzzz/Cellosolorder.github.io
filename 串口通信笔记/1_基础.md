# 基础概念

&emsp;&emsp; 最最重要的事情：**别急**。




## 一、通信的基本概念

### 通信方式

&emsp;&emsp; 通信的方式可以分为多种：

+ &emsp;&emsp; 按照数据传送方式可分为**串行通信**和**并行通信**。

+ &emsp;&emsp; 按照通信的数据同步方式，可分为**异同通信**和**同步通信**。

+ &emsp;&emsp; 按照数据的传输方向又可分为**单工、半双工和全双工通信**。

#### 简单介绍这几种通信方式：

---

&emsp;&emsp; 串行通信：使用**一条数据线**，将数据一位一位地依次传输，每一位数据占据一个固定的时间长度。

&emsp;&emsp; 并行通信：将数据字节的各位用**多条**数据线**同时进行传送**，通常是8位、16位、32位等数据一起传输。

---

&emsp;&emsp; 异步通信：指两个器件之间**没有时钟线连接**，器件接受/发送数据时使用各自的时钟，以不同的时钟频率进行通信。

&emsp;&emsp; 同步通信：两个器件之间**共用一个时钟线**，要发送的数据在时钟的作用下一位一位发送出去。

---

&emsp;&emsp; 单工通信：数据只能**在一个方向上**传输。

&emsp;&emsp; 半双工通信：数据**在两个方向上**传输，但**不能同时进行**。

&emsp;&emsp; 全双工通信：数据**在两个方向上同时**传输。

---

## 二、关于STM32F407的UART（标准串口）介绍：

&emsp;&emsp; 串口通信(Serial Communication)，是指外设和计算机之间，通过数据信号线、地线等，按位进行传输数据的一种通信方式，属于串行通信方式。串口是一种接口标准，它规定了接口的电气标准，没有规定接口插件电缆以及使用的协议。串口也称串行通信接口，是一种MCU与其他器件通信的通信协议。

&emsp;&emsp; 串口通信的启动方式有两种：

+ &emsp;&emsp; 方式一：**硬件启动**，即通过**RXNE**（接收数据寄存器非空）标志位来判断是否接收到数据，从而启动串口通信。

+ &emsp;&emsp; 方式二：**软件启动**，即通过**USART_CR1**寄存器中的**UE**位来控制串口通信的启动。

#### >> USART是什么？

> **USART**即**通用同步异步收发器**，它能够灵活地与外部设备进行**全双工**数据交换。

> **UART**即**通用异步收发器**，它是**在USART基础上增加了同步通信**功能。

> **U:通用的&emsp;&emsp;S:同步&emsp;&emsp;A:异步&emsp;&emsp;R:接受&emsp;&emsp;T:发送**

> 官网的C板有2个UART，分别是UART1和UART2。

&emsp;&emsp; 显然地，这里我们肯定讲UART。

&emsp;&emsp; **>>> 标准UART的协议类型：异步串行全双工。（没有时钟线，一条发送数据线，一条接收数据线）**

&emsp;&emsp; **>>> RXD：数据接收管脚；R = receive接受**

&emsp;&emsp; **>>> TXD：数据发送管脚；T = transmit发送**

&emsp;&emsp; **>>>> 注意：地线在硬件上一定要接，否则数据不正常。**


### 2、标准UART的数据帧格式
&emsp;&emsp; **标准UART的四要素：波特率（通讯速率），数据位长度，校验位，停止位长度。**
&emsp;&emsp; 标准UART中一帧数据：1位**起始位**+（5~8）**数据位**+1位**校验位**+（0.5~2）位**停止位**。

&emsp;&emsp; (空闲电平：数据线不传输数据时的状态，该状态为**高**电平。)


> 起始位：该状态为**低**电平，占用一个bit，代表通信开始。

> 数据位：真正**传输**的数据，占用5~8bit。

> 校验位：为了**检测**数据传输的正确与否。占用1bit。

> （一般不用）奇偶校验位：奇校验：1000 1100  0  ；偶校验：1110 0000  1 。

> 停止位：该状态为高电平，表示一帧数据结束，占用0.5~2bit。



### 3、UART的波特率

&emsp;&emsp; 波特率（Baud Rate）是指**数据传输速率**，即**每秒传输的比特数**。当接收和发送器件的时钟频率**不一致**时，为了让数据可以正确的收发，双方要**规定好一个合适的频率**进行通信，规定的这个频率称之为**波特率**,波特率又叫比特率。

&emsp;&emsp; 波特率是衡量串口通信速度的指标，它表示**每秒钟传输的比特数**。

&emsp;&emsp; 波特率越**高**，传输速度越**快**，但同时占用的系统资源也越多。

> 波特率与传输速度的关系如下：
```
 波特率 = 传输速度（bps）

 波特率 = 1 / 波特率周期（s）

 波特率周期 = 1 / 波特率（s）
```
&emsp;&emsp; *常用的波特率：115200、38400、9600,每秒能传输多少位数据？*

### 4、USART_DR

&emsp;&emsp; **USART_DR**是**UART数据寄存器**，用于**接收**和**发送**数据。

&emsp;&emsp; 该寄存器是**双缓冲**的，即**接收**和**发送**数据是**分别**存放在**两个不同的缓冲区**中的。

&emsp;&emsp; 该寄存器是**可读可写**的，即**接收**和**发送**数据可以**同时进行**。

&emsp;&emsp;

&emsp;&emsp;
## // 别的我感觉好像不是特别重要。如果后续觉得有什么要补充的，我会再补充上来。